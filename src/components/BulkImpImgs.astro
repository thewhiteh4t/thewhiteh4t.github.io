---
import { Picture } from 'astro:assets'
import type { ImageMetadata } from 'astro'
import { object } from 'astro:schema'

interface Props {
  imagePath: string
  altText: string
  imageClasses: string
}

const { imagePath, altText, imageClasses } = Astro.props

const images = import.meta.glob<{ default: ImageMetadata }>(
  '/src/assets/{project_imgs,publ_imgs,cert_imgs}/*.{jpeg,jpg,png,gif}',
)

if (!images[imagePath])
  throw new Error(
    `"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`,
  )
---

<Picture
  src={images[imagePath]()}
  alt={altText}
  formats={['avif']}
  layout="constrained"
  class={imageClasses}
  quality="mid"
/>
